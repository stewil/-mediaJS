{"version":3,"sources":["at-media-js-v0.0.1.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","debounce","func","wait","immediate","timeout","context","this","args","arguments","later","apply","callNow","clearTimeout","setTimeout",2,"AtMedia","create","settings","createBreakpointElement","_settings","element","document","querySelector","createElement","setAttribute","body","appendChild","onResize","onViewportChange","service","prop","contains","window","addEventListener","closestInRange","current","findCurrent","currentLargerThan","onChange","subscribe","remove","removeEventListener","onChangeQueue","notify","fn","Subscriber","indexOf","splice","push","err","sizes","found","index","breakpoints","checkForBp","size","bp","idx","getComputedStyle","getPropertyValue","replace","debug","./components/debounce/debounce.js"],"mappings":"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","file":"at-media-js-v0.0.1.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n(function(){\r\n    module.exports = debounce;\r\n    /**\r\n     * Credit : https://davidwalsh.name/function-debounce\r\n     * @param func\r\n     * @param wait\r\n     * @param immediate\r\n     * @returns {Function}\r\n     */\r\n    function debounce(func, wait, immediate) {\r\n        var timeout;\r\n        return function() {\r\n            var context = this, args = arguments;\r\n            var later = function() {\r\n                timeout = null;\r\n                if (!immediate){\r\n                    func.apply(context, args);\r\n                }\r\n            };\r\n            var callNow = immediate && !timeout;\r\n            clearTimeout(timeout);\r\n            timeout = setTimeout(later, wait);\r\n            if (callNow){\r\n                func.apply(context, args);\r\n            }\r\n        };\r\n    }\r\n\r\n})();\n},{}],2:[function(require,module,exports){\n(function () {\n    'use strict';\n\n    window['atMedia'] = new AtMedia();\n\n\n    function AtMedia() {\n\n        /*========================================================================\n            PRIVATE VARIABLES\n         ========================================================================*/\n\n        var _settings = {\n            element:null,\n            breakpoints:[\"default\", \"xs\", \"sm\", \"md\", \"lg\"],\n            debounce:50,\n            debug:false\n        };\n\n        var service,\n            body            =   document.querySelector('body'),\n            onChangeQueue   =   [];\n        /*========================================================================\n            PUBLIC METHODS\n         ========================================================================*/\n        this.create = create;\n\n        /*========================================================================\n            LISTENERS / OBSERVERS / INIT\n         ========================================================================*/\n\n        /*========================================================================\n            PRIVATE METHODS\n        ========================================================================*/\n        var debounce = require('./components/debounce/debounce.js');\n\n        function create(settings){\n\n            var onResize = debounce(onViewportChange, _settings['debounce']);\n\n            service = this;\n\n            for(var prop in settings){\n                _settings[prop] = prop;\n            }\n\n            if (!_settings.element || document.contains(_settings.element)) {\n                createBreakpointElement();\n            }\n\n            window.addEventListener('resize', onResize);\n\n            this.closestInRange         =       closestInRange;\n            this.current                =       findCurrent();\n            this.currentLargerThan      =       currentLargerThan;\n            this.onChange               =       subscribe;\n            this.remove                 =       remove;\n\n            function createBreakpointElement(){\n                _settings.element = document.querySelector(\"[data-breakpoints]\");\n                if(!_settings.element){\n                    _settings.element = document.createElement('div');\n                    _settings.element.setAttribute('data-breakpoints', '');\n                    body.appendChild(_settings.element);\n                }\n            }\n        }\n\n        function remove(){\n            window.removeEventListener('resize', onResize);\n\n            service         = null;\n            onChangeQueue   = [];\n        }\n\n        function onViewportChange(){\n            if (findCurrent() !== service.current) {\n                service.current = findCurrent();\n                notify();\n            }\n        }\n\n        /**\n         * Accepts a Function to be executed on breakpoint change\n         * @param fn\n         * @returns {Subscriber}\n         */\n        function subscribe (fn){\n            onChangeQueue.push(fn);\n\n            //We execute the function on subscription to ensure the function is returned\n            //a value on binding\n            fn(service.current);\n            return new Subscriber(fn);\n\n            function Subscriber(fn){\n                this.remove = function(){\n                    if(onChangeQueue.indexOf(fn) > -1){\n                        onChangeQueue.splice(onChangeQueue.indexOf(fn), 1);\n                    }\n                }\n            }\n        }\n\n        /**\n         * Executes all stored subscribers\n         */\n        function notify(){\n            var l = onChangeQueue.length;\n\n            while(l--){\n                try{\n                    onChangeQueue[l](service.current);\n                }catch(err){\n                    onChangeQueue.splice(l, 1);\n                }\n            }\n        }\n\n        /**\n         * Returns the breakpoint to match the current breakpoint in a range\n         * @param sizes\n         * @returns {*|string}\n         */\n        function closestInRange(sizes) {\n            var current = findCurrent(),\n                found;\n\n            if (sizes[current]) {\n                found = current;\n            } else {\n                var index = _settings.breakpoints.indexOf(current);\n\n                checkForBp : while(index--){\n                    for (var size in sizes) {\n                        if (size === _settings.breakpoints[index]) {\n                            found = size;\n                            break checkForBp;\n                        }\n                    }\n                }\n            }\n            return found || \"default\";\n        }\n\n        /**\n         * Returns true/false if the current breakpoint is larger the value supplied\n         * @param bp\n         * @returns {boolean}\n         */\n        function currentLargerThan(bp) {\n            var idx = _settings.breakpoints.indexOf(findCurrent()) + 1;\n\n            while (idx--) {\n                if (bp === _settings.breakpoints[idx]) {\n                    return true;\n                }\n            }\n            return false;\n        }\n\n        function findCurrent() {\n            return (window.getComputedStyle(_settings.element, ':after').getPropertyValue('content').replace(/'|\"/g, '') || \"default\");\n        }\n\n    }\n})();\n},{\"./components/debounce/debounce.js\":1}]},{},[2]);\n"],"sourceRoot":"/source/"}